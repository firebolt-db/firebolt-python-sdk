{"uid":"8a6f7580e8146d70","name":"test_sql_error[core]","fullName":"tests.integration.dbapi.sync.V2.test_errors#test_sql_error","historyId":"7ac4f4f26820fceaef6b66e08252e43c","time":{"start":1754330654279,"stop":1754330654279,"duration":0},"description":"Connection properly reacts to sql execution error.","descriptionHtml":"<p>Connection properly reacts to sql execution error.</p>\n","status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'startswith'","statusTrace":"engine_name = '', database_name = 'firebolt'\nauth = <firebolt.client.auth.client_credentials.ClientCredentials object at 0x7f0c9c8d8440>\ncore_auth = <firebolt.client.auth.firebolt_core.FireboltCore object at 0x7f0c9c5049a0>\naccount_name = '', api_endpoint = '', core_url = 'http://localhost:3473'\nrequest = <SubRequest 'connection' for <Function test_sql_error[core]>>\n\n    @fixture(params=[\"remote\", \"core\"])\n    def connection(\n        engine_name: str,\n        database_name: str,\n        auth: Auth,\n        core_auth: Auth,\n        account_name: str,\n        api_endpoint: str,\n        core_url: str,\n        request: Any,\n    ) -> Connection:\n        if request.param == \"core\":\n            kwargs = {\n                \"engine_name\": None,\n                \"database\": \"firebolt\",\n                \"auth\": core_auth,\n                \"url\": core_url,\n                \"account_name\": None,\n                \"api_endpoint\": None,\n            }\n        else:\n            kwargs = {\n                \"engine_name\": engine_name,\n                \"database\": database_name,\n                \"auth\": auth,\n                \"account_name\": account_name,\n                \"api_endpoint\": api_endpoint,\n            }\n>       with connect(\n            **kwargs,\n        ) as connection:\n\ntests/integration/dbapi/sync/V2/conftest.py:42: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/firebolt/db/connection.py:64: in connect\n    api_endpoint = fix_url_schema(api_endpoint)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nurl = None\n\n    def fix_url_schema(url: str) -> str:\n        \"\"\"Add schema to URL if it's missing.\n    \n        Args:\n            url (str): URL to check\n    \n        Returns:\n            str: URL with schema present\n    \n        \"\"\"\n>       return url if url.startswith(\"http\") else f\"https://{url}\"\nE       AttributeError: 'NoneType' object has no attribute 'startswith'\n\n/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/firebolt/utils/util.py:89: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"database_name","time":{"start":1754330651567,"stop":1754330651567,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_secret","time":{"start":1754330651567,"stop":1754330651567,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"engine_name","time":{"start":1754330651567,"stop":1754330651567,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth","time":{"start":1754330651567,"stop":1754330651634,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_id","time":{"start":1754330651567,"stop":1754330651567,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"core_auth","time":{"start":1754330651634,"stop":1754330651634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_name","time":{"start":1754330651634,"stop":1754330651634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_endpoint","time":{"start":1754330651634,"stop":1754330651634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"core_url","time":{"start":1754330651635,"stop":1754330651635,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connection","time":{"start":1754330654281,"stop":1754330654281,"duration":0},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'startswith'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1128, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/_pytest/fixtures.py\", line 900, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/integration/dbapi/sync/V2/conftest.py\", line 42, in connection\n    with connect(\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/firebolt/db/connection.py\", line 64, in connect\n    api_endpoint = fix_url_schema(api_endpoint)\n  File \"/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/site-packages/firebolt/utils/util.py\", line 89, in fix_url_schema\n    return url if url.startswith(\"http\") else f\"https://{url}\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"parentSuite","value":"tests.integration.dbapi.sync.V2"},{"name":"suite","value":"test_errors"},{"name":"host","value":"pkrvmjbmru5nbw0"},{"name":"thread","value":"4335-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.dbapi.sync.V2.test_errors"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"connection","value":"'core'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"8a6f7580e8146d70.json","parameterValues":["'core'"]}