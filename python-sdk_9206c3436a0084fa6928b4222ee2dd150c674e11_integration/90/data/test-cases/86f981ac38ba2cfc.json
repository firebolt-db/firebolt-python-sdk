{"uid":"86f981ac38ba2cfc","name":"test_long_query[remote]","fullName":"tests.integration.dbapi.sync.V2.test_queries#test_long_query","historyId":"c66814168378ce070fb5f3d193d9255d","time":{"start":1753197386443,"stop":1753197936045,"duration":549602},"description":"AWS ALB TCP timeout set to 350; make sure we handle the keepalive correctly.","descriptionHtml":"<p>AWS ALB TCP timeout set to 350; make sure we handle the keepalive correctly.</p>\n","status":"failed","statusMessage":"Failed: Timeout >550.0s","statusTrace":"connection = <firebolt.db.connection.Connection object at 0x7fcde2712190>\nminimal_time = <function minimal_time.<locals>.setter at 0x7fcde2710d30>\n\n    @mark.slow\n    @mark.timeout(timeout=550)\n    def test_long_query(\n        connection: Connection,\n        minimal_time: Callable[[float], None],\n    ) -> None:\n        \"\"\"AWS ALB TCP timeout set to 350; make sure we handle the keepalive correctly.\"\"\"\n    \n        minimal_time(350)\n    \n        with connection.cursor() as c:\n>           c.execute(LONG_SELECT)\n\ntests/integration/dbapi/sync/V2/test_queries.py:115: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/common/cursor/decorators.py:24: in inner\n    return func(self, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:375: in execute\n    self._do_execute(query, params_list, skip_parsing, timeout=timeout_seconds)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:248: in _do_execute\n    self._execute_single_query(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:302: in _execute_single_query\n    self._handle_query_execution(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:326: in _handle_query_execution\n    resp = self._api_request(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:160: in _api_request\n    return self._client.send(req, stream=True)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:901: in send\n    response = self._send_handling_auth(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:929: in _send_handling_auth\n    response = self._send_handling_redirects(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/client/client.py:123: in _send_handling_redirects\n    return super()._send_handling_redirects(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:966: in _send_handling_redirects\n    response = self._send_single_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:1002: in _send_single_request\n    response = transport.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_transports/default.py:218: in handle_request\n    resp = self._pool.handle_request(req)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection_pool.py:262: in handle_request\n    raise exc\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection_pool.py:245: in handle_request\n    response = connection.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection.py:96: in handle_request\n    return self._connection.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:121: in handle_request\n    raise exc\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:99: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:164: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:200: in _receive_event\n    data = self._network_stream.read(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_backends/sync.py:28: in read\n    return self._sock.recv(max_bytes)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/ssl.py:1259: in recv\n    return self.read(buflen)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nlen = 65536, buffer = None\n\n    def read(self, len=1024, buffer=None):\n        \"\"\"Read up to LEN bytes and return them.\n        Return zero-length string on EOF.\"\"\"\n    \n        self._checkClosed()\n        if self._sslobj is None:\n            raise ValueError(\"Read on closed or unwrapped SSL socket.\")\n        try:\n            if buffer is not None:\n                return self._sslobj.read(len, buffer)\n            else:\n>               return self._sslobj.read(len)\nE               Failed: Timeout >550.0s\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/ssl.py:1134: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"database_name","time":{"start":1753197366169,"stop":1753197366169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_name","time":{"start":1753197366169,"stop":1753197366170,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_id","time":{"start":1753197366170,"stop":1753197366174,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_secret","time":{"start":1753197366174,"stop":1753197366174,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth","time":{"start":1753197366174,"stop":1753197366298,"duration":124},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_endpoint","time":{"start":1753197366298,"stop":1753197366299,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"engine_name","time":{"start":1753197367052,"stop":1753197367052,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"core_url","time":{"start":1753197367053,"stop":1753197367053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"core_auth","time":{"start":1753197367053,"stop":1753197367053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connection","time":{"start":1753197386045,"stop":1753197386442,"duration":397},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"minimal_time","time":{"start":1753197386442,"stop":1753197386442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"AWS ALB TCP timeout set to 350; make sure we handle the keepalive correctly.","status":"failed","statusMessage":"Failed: Timeout >550.0s","statusTrace":"connection = <firebolt.db.connection.Connection object at 0x7fcde2712190>\nminimal_time = <function minimal_time.<locals>.setter at 0x7fcde2710d30>\n\n    @mark.slow\n    @mark.timeout(timeout=550)\n    def test_long_query(\n        connection: Connection,\n        minimal_time: Callable[[float], None],\n    ) -> None:\n        \"\"\"AWS ALB TCP timeout set to 350; make sure we handle the keepalive correctly.\"\"\"\n    \n        minimal_time(350)\n    \n        with connection.cursor() as c:\n>           c.execute(LONG_SELECT)\n\ntests/integration/dbapi/sync/V2/test_queries.py:115: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/common/cursor/decorators.py:24: in inner\n    return func(self, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:375: in execute\n    self._do_execute(query, params_list, skip_parsing, timeout=timeout_seconds)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:248: in _do_execute\n    self._execute_single_query(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:302: in _execute_single_query\n    self._handle_query_execution(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:326: in _handle_query_execution\n    resp = self._api_request(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/db/cursor.py:160: in _api_request\n    return self._client.send(req, stream=True)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:901: in send\n    response = self._send_handling_auth(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:929: in _send_handling_auth\n    response = self._send_handling_redirects(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/firebolt/client/client.py:123: in _send_handling_redirects\n    return super()._send_handling_redirects(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:966: in _send_handling_redirects\n    response = self._send_single_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_client.py:1002: in _send_single_request\n    response = transport.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpx/_transports/default.py:218: in handle_request\n    resp = self._pool.handle_request(req)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection_pool.py:262: in handle_request\n    raise exc\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection_pool.py:245: in handle_request\n    response = connection.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/connection.py:96: in handle_request\n    return self._connection.handle_request(request)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:121: in handle_request\n    raise exc\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:99: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:164: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_sync/http11.py:200: in _receive_event\n    data = self._network_stream.read(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/httpcore/_backends/sync.py:28: in read\n    return self._sock.recv(max_bytes)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/ssl.py:1259: in recv\n    return self.read(buflen)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nlen = 65536, buffer = None\n\n    def read(self, len=1024, buffer=None):\n        \"\"\"Read up to LEN bytes and return them.\n        Return zero-length string on EOF.\"\"\"\n    \n        self._checkClosed()\n        if self._sslobj is None:\n            raise ValueError(\"Read on closed or unwrapped SSL socket.\")\n        try:\n            if buffer is not None:\n                return self._sslobj.read(len, buffer)\n            else:\n>               return self._sslobj.read(len)\nE               Failed: Timeout >550.0s\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/ssl.py:1134: Failed","steps":[],"attachments":[{"uid":"fe0a98040799ded5","name":"stderr","source":"fe0a98040799ded5.txt","type":"text/plain","size":888}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"minimal_time::0","time":{"start":1753197936169,"stop":1753197936169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connection::0","time":{"start":1753197936170,"stop":1753197936170,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"slow"},{"name":"parentSuite","value":"tests.integration.dbapi.sync.V2"},{"name":"suite","value":"test_queries"},{"name":"host","value":"pkrvmq0rgcvqdmg"},{"name":"thread","value":"2766-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.dbapi.sync.V2.test_queries"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"connection","value":"'remote'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["slow"]},"source":"86f981ac38ba2cfc.json","parameterValues":["'remote'"]}