{"uid":"f6ef3b2715542451","name":"test_cursor_unknown_error_body_logging","fullName":"tests.unit.db.test_cursor#test_cursor_unknown_error_body_logging","historyId":"9e9db9d6284af6f68416158c85e8fb70","time":{"start":1732936387080,"stop":1732936387083,"duration":3},"status":"broken","statusMessage":"KeyError: <_pytest.stash.StashKey object at 0x7f054faa82a0>","statusTrace":"httpx_mock = <pytest_httpx._httpx_mock.HTTPXMock object at 0x7f054ed02130>\ncursor = <firebolt.db.cursor.CursorV2 object at 0x7f054c012250>\ncaplog = <_pytest.logging.LogCaptureFixture object at 0x7f054bcdee80>\nquery_url = URL('https://mock_engine_name.mock.firebolt.io/?output_format=JSON_Compact&database=database')\n\n    def test_cursor_unknown_error_body_logging(\n        httpx_mock: HTTPXMock, cursor: Cursor, caplog: LogCaptureFixture, query_url: str\n    ):\n        actual_error_body = \"Your query was incorrect\"\n        httpx_mock.add_callback(\n            lambda *args, **kwargs: Response(\n                status_code=codes.NOT_IMPLEMENTED, content=actual_error_body\n            ),\n            url=query_url,\n        )\n        with raises(HTTPStatusError):\n            cursor.execute(\"select 1\")\n>       assert actual_error_body in caplog.text\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/unit/db/test_cursor.py:591: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:408: in text\n    return _remove_ansi_escape_sequences(self.handler.stream.getvalue())\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:388: in handler\n    return self._item.stash[caplog_handler_key]\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <_pytest.stash.Stash object at 0x7f054d04c7f0>\nkey = <_pytest.stash.StashKey object at 0x7f054faa82a0>\n\n    def __getitem__(self, key: StashKey[T]) -> T:\n        \"\"\"Get the value for key.\n    \n        Raises ``KeyError`` if the key wasn't set before.\n        \"\"\"\n>       return cast(T, self._storage[key])\nE       KeyError: <_pytest.stash.StashKey object at 0x7f054faa82a0>\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/stash.py:80: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"clear_cache","time":{"start":1732936386812,"stop":1732936386812,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_fake_fs","time":{"start":1732936386812,"stop":1732936386817,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"KeyError: <_pytest.stash.StashKey object at 0x7f054faa82a0>","statusTrace":"httpx_mock = <pytest_httpx._httpx_mock.HTTPXMock object at 0x7f054ed02130>\ncursor = <firebolt.db.cursor.CursorV2 object at 0x7f054c012250>\ncaplog = <_pytest.logging.LogCaptureFixture object at 0x7f054bcdee80>\nquery_url = URL('https://mock_engine_name.mock.firebolt.io/?output_format=JSON_Compact&database=database')\n\n    def test_cursor_unknown_error_body_logging(\n        httpx_mock: HTTPXMock, cursor: Cursor, caplog: LogCaptureFixture, query_url: str\n    ):\n        actual_error_body = \"Your query was incorrect\"\n        httpx_mock.add_callback(\n            lambda *args, **kwargs: Response(\n                status_code=codes.NOT_IMPLEMENTED, content=actual_error_body\n            ),\n            url=query_url,\n        )\n        with raises(HTTPStatusError):\n            cursor.execute(\"select 1\")\n>       assert actual_error_body in caplog.text\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/unit/db/test_cursor.py:591: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:408: in text\n    return _remove_ansi_escape_sequences(self.handler.stream.getvalue())\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:388: in handler\n    return self._item.stash[caplog_handler_key]\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <_pytest.stash.Stash object at 0x7f054d04c7f0>\nkey = <_pytest.stash.StashKey object at 0x7f054faa82a0>\n\n    def __getitem__(self, key: StashKey[T]) -> T:\n        \"\"\"Get the value for key.\n    \n        Raises ``KeyError`` if the key wasn't set before.\n        \"\"\"\n>       return cast(T, self._storage[key])\nE       KeyError: <_pytest.stash.StashKey object at 0x7f054faa82a0>\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/stash.py:80: KeyError","steps":[],"attachments":[{"uid":"cd7f80fb307be35f","name":"log","source":"cd7f80fb307be35f.txt","type":"text/plain","size":87}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"global_fake_fs::0","time":{"start":1732936387199,"stop":1732936387200,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.unit.db"},{"name":"suite","value":"test_cursor"},{"name":"host","value":"fv-az659-735"},{"name":"thread","value":"2227-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.db.test_cursor"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":105,"skipped":0,"passed":58,"unknown":0,"total":163},"items":[{"uid":"7c38c950f58b178a","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/370//#testresult/7c38c950f58b178a","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f69b2b03280>","time":{"start":1732850330526,"stop":1732850330529,"duration":3}},{"uid":"e441c1ffd9c44721","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/373//#testresult/e441c1ffd9c44721","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f9a4e344280>","time":{"start":1732850185133,"stop":1732850185136,"duration":3}},{"uid":"a8bbc7467dfb9fe7","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/369//#testresult/a8bbc7467dfb9fe7","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f3a5a33e2a0>","time":{"start":1732763946588,"stop":1732763946591,"duration":3}},{"uid":"c2a1a661eaf3161e","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/372//#testresult/c2a1a661eaf3161e","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f458353f2e0>","time":{"start":1732763805470,"stop":1732763805473,"duration":3}},{"uid":"8c92dcba01ca3fee","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/368//#testresult/8c92dcba01ca3fee","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f2c722a02e0>","time":{"start":1732677549387,"stop":1732677549390,"duration":3}},{"uid":"49b19da0054412a3","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/371//#testresult/49b19da0054412a3","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f4f0fc942a0>","time":{"start":1732677408176,"stop":1732677408179,"duration":3}},{"uid":"d5793f9abb1b99c6","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/367//#testresult/d5793f9abb1b99c6","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fd0d87bf2e0>","time":{"start":1732591043621,"stop":1732591043624,"duration":3}},{"uid":"7b5ae43b98deab42","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/370//#testresult/7b5ae43b98deab42","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fcb6c7bf2e0>","time":{"start":1732590895564,"stop":1732590895566,"duration":2}},{"uid":"76e63f0be525cf4a","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/366//#testresult/76e63f0be525cf4a","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f051e37f2e0>","time":{"start":1732504730298,"stop":1732504730301,"duration":3}},{"uid":"4267ee05b6690a81","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/369//#testresult/4267ee05b6690a81","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7ff5892bf2c0>","time":{"start":1732504575404,"stop":1732504575407,"duration":3}},{"uid":"d8a872b0aa05fbaf","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/365//#testresult/d8a872b0aa05fbaf","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f2221d7f2c0>","time":{"start":1732418375136,"stop":1732418375139,"duration":3}},{"uid":"9620d7284f36f86","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/368//#testresult/9620d7284f36f86","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f4f328cc2c0>","time":{"start":1732418223041,"stop":1732418223043,"duration":2}},{"uid":"8a47ece4cc6728f2","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/364//#testresult/8a47ece4cc6728f2","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f19d1ebf2e0>","time":{"start":1732331656483,"stop":1732331656486,"duration":3}},{"uid":"ffcae57514e7634e","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/367//#testresult/ffcae57514e7634e","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fcf5b77f2e0>","time":{"start":1732331512203,"stop":1732331512206,"duration":3}},{"uid":"92c79b7ab0597dc4","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/363//#testresult/92c79b7ab0597dc4","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fdadc933280>","time":{"start":1732245371976,"stop":1732245371979,"duration":3}},{"uid":"b0ebff54de10aa98","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/366//#testresult/b0ebff54de10aa98","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7efc7e1bf300>","time":{"start":1732245245922,"stop":1732245245926,"duration":4}},{"uid":"9ac409d663af726c","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/362//#testresult/9ac409d663af726c","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f19bb483280>","time":{"start":1732158928877,"stop":1732158928880,"duration":3}},{"uid":"483018dd2fed09d9","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/365//#testresult/483018dd2fed09d9","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f1aae8c3280>","time":{"start":1732158778948,"stop":1732158778951,"duration":3}},{"uid":"f1ef435cbfc3fc4a","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/361//#testresult/f1ef435cbfc3fc4a","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fafb00ff2c0>","time":{"start":1732072525376,"stop":1732072525379,"duration":3}},{"uid":"8c74a6a0ce915f8","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/364//#testresult/8c74a6a0ce915f8","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fb4ac3182a0>","time":{"start":1732072382136,"stop":1732072382139,"duration":3}}]},"tags":[]},"source":"f6ef3b2715542451.json","parameterValues":[]}