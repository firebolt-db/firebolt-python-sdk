{"uid":"cd6c15db2243902c","name":"test_cursor_unknown_error_body_logging","fullName":"tests.unit.db.test_cursor#test_cursor_unknown_error_body_logging","historyId":"9e9db9d6284af6f68416158c85e8fb70","time":{"start":1731640562782,"stop":1731640562786,"duration":4},"status":"broken","statusMessage":"KeyError: <_pytest.stash.StashKey object at 0x7f79b133e2c0>","statusTrace":"httpx_mock = <pytest_httpx._httpx_mock.HTTPXMock object at 0x7f79ad2a06d0>\ncursor = <firebolt.db.cursor.CursorV2 object at 0x7f79ad60eeb0>\ncaplog = <_pytest.logging.LogCaptureFixture object at 0x7f79addd1a30>\nquery_url = URL('https://mock_engine_name.mock.firebolt.io/?output_format=JSON_Compact&database=database')\n\n    def test_cursor_unknown_error_body_logging(\n        httpx_mock: HTTPXMock, cursor: Cursor, caplog: LogCaptureFixture, query_url: str\n    ):\n        actual_error_body = \"Your query was incorrect\"\n        httpx_mock.add_callback(\n            lambda *args, **kwargs: Response(\n                status_code=codes.NOT_IMPLEMENTED, content=actual_error_body\n            ),\n            url=query_url,\n        )\n        with raises(HTTPStatusError):\n            cursor.execute(\"select 1\")\n>       assert actual_error_body in caplog.text\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/unit/db/test_cursor.py:591: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:408: in text\n    return _remove_ansi_escape_sequences(self.handler.stream.getvalue())\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:388: in handler\n    return self._item.stash[caplog_handler_key]\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <_pytest.stash.Stash object at 0x7f79af3267f0>\nkey = <_pytest.stash.StashKey object at 0x7f79b133e2c0>\n\n    def __getitem__(self, key: StashKey[T]) -> T:\n        \"\"\"Get the value for key.\n    \n        Raises ``KeyError`` if the key wasn't set before.\n        \"\"\"\n>       return cast(T, self._storage[key])\nE       KeyError: <_pytest.stash.StashKey object at 0x7f79b133e2c0>\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/stash.py:80: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"clear_cache","time":{"start":1731640562511,"stop":1731640562511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_fake_fs","time":{"start":1731640562512,"stop":1731640562517,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"KeyError: <_pytest.stash.StashKey object at 0x7f79b133e2c0>","statusTrace":"httpx_mock = <pytest_httpx._httpx_mock.HTTPXMock object at 0x7f79ad2a06d0>\ncursor = <firebolt.db.cursor.CursorV2 object at 0x7f79ad60eeb0>\ncaplog = <_pytest.logging.LogCaptureFixture object at 0x7f79addd1a30>\nquery_url = URL('https://mock_engine_name.mock.firebolt.io/?output_format=JSON_Compact&database=database')\n\n    def test_cursor_unknown_error_body_logging(\n        httpx_mock: HTTPXMock, cursor: Cursor, caplog: LogCaptureFixture, query_url: str\n    ):\n        actual_error_body = \"Your query was incorrect\"\n        httpx_mock.add_callback(\n            lambda *args, **kwargs: Response(\n                status_code=codes.NOT_IMPLEMENTED, content=actual_error_body\n            ),\n            url=query_url,\n        )\n        with raises(HTTPStatusError):\n            cursor.execute(\"select 1\")\n>       assert actual_error_body in caplog.text\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/unit/db/test_cursor.py:591: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:408: in text\n    return _remove_ansi_escape_sequences(self.handler.stream.getvalue())\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/logging.py:388: in handler\n    return self._item.stash[caplog_handler_key]\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <_pytest.stash.Stash object at 0x7f79af3267f0>\nkey = <_pytest.stash.StashKey object at 0x7f79b133e2c0>\n\n    def __getitem__(self, key: StashKey[T]) -> T:\n        \"\"\"Get the value for key.\n    \n        Raises ``KeyError`` if the key wasn't set before.\n        \"\"\"\n>       return cast(T, self._storage[key])\nE       KeyError: <_pytest.stash.StashKey object at 0x7f79b133e2c0>\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/_pytest/stash.py:80: KeyError","steps":[],"attachments":[{"uid":"15bd4b06252a34eb","name":"log","source":"15bd4b06252a34eb.txt","type":"text/plain","size":87}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"global_fake_fs::0","time":{"start":1731640562934,"stop":1731640562935,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.unit.db"},{"name":"suite","value":"test_cursor"},{"name":"host","value":"fv-az1208-77"},{"name":"thread","value":"2172-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.db.test_cursor"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":76,"skipped":0,"passed":58,"unknown":0,"total":134},"items":[{"uid":"997fdd057ae7d92e","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/359//#testresult/997fdd057ae7d92e","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fa986703280>","time":{"start":1731640424883,"stop":1731640424886,"duration":3}},{"uid":"5b91be255710e027","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/355//#testresult/5b91be255710e027","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f36296bf2a0>","time":{"start":1731553834851,"stop":1731553834854,"duration":3}},{"uid":"111fd5139c4a8073","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/358//#testresult/111fd5139c4a8073","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f101e57f300>","time":{"start":1731553703056,"stop":1731553703060,"duration":4}},{"uid":"26fdefb561843636","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/354//#testresult/26fdefb561843636","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f0aae9232a0>","time":{"start":1731467399633,"stop":1731467399636,"duration":3}},{"uid":"5274824d9732f079","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/357//#testresult/5274824d9732f079","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f346efbf2a0>","time":{"start":1731467254052,"stop":1731467254054,"duration":2}},{"uid":"9112d4416dc1940e","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/353//#testresult/9112d4416dc1940e","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fd9328ef2c0>","time":{"start":1731380902726,"stop":1731380902729,"duration":3}},{"uid":"9bda3946c26bb0bd","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/356//#testresult/9bda3946c26bb0bd","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fc8819ff2a0>","time":{"start":1731380761360,"stop":1731380761362,"duration":2}},{"uid":"499927c3d6b5e838","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/352//#testresult/499927c3d6b5e838","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f2c6617f2e0>","time":{"start":1731294653383,"stop":1731294653385,"duration":2}},{"uid":"9242c4db83e64263","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/355//#testresult/9242c4db83e64263","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fc3940c42c0>","time":{"start":1731294504987,"stop":1731294504990,"duration":3}},{"uid":"60817695990597dc","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/351//#testresult/60817695990597dc","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fe730bff2a0>","time":{"start":1731208251100,"stop":1731208251103,"duration":3}},{"uid":"27283eebc50bcc93","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/354//#testresult/27283eebc50bcc93","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f1d892e02c0>","time":{"start":1731208122978,"stop":1731208122981,"duration":3}},{"uid":"e30fcb53c370e460","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/350//#testresult/e30fcb53c370e460","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f0235ebe2e0>","time":{"start":1731122000462,"stop":1731122000465,"duration":3}},{"uid":"5334297bdcfc9847","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/353//#testresult/5334297bdcfc9847","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fb26dca02e0>","time":{"start":1731121608404,"stop":1731121608407,"duration":3}},{"uid":"d45ef02debc901ab","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/349//#testresult/d45ef02debc901ab","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f78ee2ef2c0>","time":{"start":1731035366376,"stop":1731035366379,"duration":3}},{"uid":"e26e226f975f2d74","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/352//#testresult/e26e226f975f2d74","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fa8a3dff300>","time":{"start":1731035225810,"stop":1731035225813,"duration":3}},{"uid":"8aa884085e506e39","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/348//#testresult/8aa884085e506e39","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f5bdffff2a0>","time":{"start":1730949047589,"stop":1730949047592,"duration":3}},{"uid":"e6900b0e9e2c3a1f","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/351//#testresult/e6900b0e9e2c3a1f","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fe2e097f2c0>","time":{"start":1730948920374,"stop":1730948920377,"duration":3}},{"uid":"6becfcc4f126ead5","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/347//#testresult/6becfcc4f126ead5","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f1d437c1280>","time":{"start":1730862539397,"stop":1730862539400,"duration":3}},{"uid":"6269ea61d6b2382f","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/350//#testresult/6269ea61d6b2382f","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7fb4256bf2e0>","time":{"start":1730862376015,"stop":1730862376018,"duration":3}},{"uid":"fac9e2ba8e1046af","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/_2bddcd39486ecb4e8d7d7debea7fd95bd3aab741_unit/346//#testresult/fac9e2ba8e1046af","status":"broken","statusDetails":"KeyError: <_pytest.stash.StashKey object at 0x7f806768d0c0>","time":{"start":1730776172431,"stop":1730776172433,"duration":2}}]},"tags":[]},"source":"cd6c15db2243902c.json","parameterValues":[]}