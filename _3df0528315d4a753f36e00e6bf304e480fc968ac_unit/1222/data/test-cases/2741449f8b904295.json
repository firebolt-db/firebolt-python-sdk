{"uid":"2741449f8b904295","name":"test_engine_new_status[DELETING-DELETING]","fullName":"tests.unit.service.test_engine#test_engine_new_status","historyId":"dbf567b9bc8a637bb4e223fa5acdc713","time":{"start":1718886005448,"stop":1718886005453,"duration":5},"status":"broken","statusMessage":"TypeError: unhashable type: 'list'","statusTrace":"engine_status = 'DELETING'\nexpected_status = <EngineStatus.DELETING: 'DELETING'>\nhttpx_mock = <pytest_httpx._httpx_mock.HTTPXMock object at 0x7f600b1cd2e0>\nresource_manager = <firebolt.service.manager.ResourceManager object at 0x7f600b0fc670>\nsystem_engine_no_db_query_url = 'https://bravo.a.eu-west-1.aws.mock.firebolt.io/?output_format=JSON_Compact'\nmock_engine = Engine(name='mock_engine_name', region='', spec=<InstanceType.M: 'M'>, scale=2, current_status='DELETING', version='', endpoint='api-dev.mock.firebolt.io', warmup='', auto_stop=7200, type='')\n\n    @mark.parametrize(\n        \"engine_status, expected_status\",\n        [(status.value.upper(), status) for status in EngineStatus],\n    )\n    def test_engine_new_status(\n        engine_status: str,\n        expected_status: EngineStatus,\n        httpx_mock: HTTPXMock,\n        resource_manager: ResourceManager,\n        system_engine_no_db_query_url: str,\n        mock_engine: Engine,\n    ):\n        mock_engine.current_status = engine_status\n        get_engine_callback = get_objects_from_db_callback([mock_engine])\n    \n        httpx_mock.add_callback(get_engine_callback, url=system_engine_no_db_query_url)\n    \n>       engine = resource_manager.engines.get_by_name(mock_engine.name)\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/tests/unit/service/test_engine.py:189: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/src/firebolt/service/V2/engine.py:67: in get_by_name\n    return self.get(name)\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/src/firebolt/service/V2/engine.py:64: in get\n    return Engine._from_dict(self._get_dict(name), self)\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/src/firebolt/service/V2/engine.py:58: in _get_dict\n    return {\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n.0 = <zip object at 0x7f600ac63e00>\n\n    return {\n>       column.name: value for column, value in zip(c.description, c.fetchone())\n    }\nE   TypeError: unhashable type: 'list'\n\n/home/runner/work/firebolt-python-sdk/firebolt-python-sdk/src/firebolt/service/V2/engine.py:59: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"global_fake_fs","time":{"start":1718886005293,"stop":1718886005295,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clear_cache","time":{"start":1718886005293,"stop":1718886005293,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"non_mocked_hosts","time":{"start":1718886005296,"stop":1718886005296,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client_id","time":{"start":1718886005296,"stop":1718886005297,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_all_responses_were_requested","time":{"start":1718886005296,"stop":1718886005296,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1718886005296,"stop":1718886005296,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpx_mock","time":{"start":1718886005296,"stop":1718886005296,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth","time":{"start":1718886005297,"stop":1718886005323,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client_secret","time":{"start":1718886005297,"stop":1718886005297,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"access_token","time":{"start":1718886005323,"stop":1718886005324,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth_url","time":{"start":1718886005323,"stop":1718886005323,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_endpoint","time":{"start":1718886005323,"stop":1718886005323,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_name","time":{"start":1718886005323,"stop":1718886005323,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth_endpoint","time":{"start":1718886005323,"stop":1718886005323,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_credentials_callback","time":{"start":1718886005324,"stop":1718886005324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_system_engine_callback","time":{"start":1718886005324,"stop":1718886005324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_system_engine_url","time":{"start":1718886005324,"stop":1718886005324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"system_engine_url","time":{"start":1718886005324,"stop":1718886005324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_id_url","time":{"start":1718886005324,"stop":1718886005324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_id","time":{"start":1718886005325,"stop":1718886005325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_id_callback","time":{"start":1718886005325,"stop":1718886005325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_system_engine_connection_flow","time":{"start":1718886005325,"stop":1718886005325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"resource_manager","time":{"start":1718886005325,"stop":1718886005446,"duration":121},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_type","time":{"start":1718886005446,"stop":1718886005447,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"engine_name","time":{"start":1718886005446,"stop":1718886005446,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"system_engine_no_db_query_url","time":{"start":1718886005446,"stop":1718886005446,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_engine","time":{"start":1718886005447,"stop":1718886005447,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"httpx_mock::0","time":{"start":1718886005482,"stop":1718886005482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch::0","time":{"start":1718886005483,"stop":1718886005483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_fake_fs::0","time":{"start":1718886005484,"stop":1718886005485,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.unit.service"},{"name":"suite","value":"test_engine"},{"name":"host","value":"fv-az1022-933"},{"name":"thread","value":"2142-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.service.test_engine"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"engine_status","value":"'DELETING'"},{"name":"expected_status","value":"<EngineStatus.DELETING: 'DELETING'>"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2741449f8b904295.json","parameterValues":["'DELETING'","<EngineStatus.DELETING: 'DELETING'>"]}