{"uid":"365fb702b0cd0781","name":"test_streaming_limited_memory","fullName":"tests.integration.dbapi.sync.V2.test_streaming#test_streaming_limited_memory","historyId":"4d695bc79a533e6f37dcc36374e0216d","time":{"start":1744722757443,"stop":1744722764709,"duration":7266},"status":"failed","statusMessage":"AssertionError: Memory usage exceeded limit after execution (increased by 2004.46875MB)\nassert 2004.46875 < 100","statusTrace":"connection = <firebolt.db.connection.Connection object at 0x7f5bb7d61820>\n\n    def test_streaming_limited_memory(\n        connection: Connection,\n    ) -> None:\n    \n        memory_overhead_threshold_mb = 100\n        row_count, value = (\n            10000000,\n            \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n        )\n        original_memory_mb = get_process_memory_mb()\n        sql = f\"select '{value}' from generate_series(1, {row_count})\"\n        with connection.cursor() as c:\n            c.execute_stream(sql)\n    \n            memory_diff = get_process_memory_mb() - original_memory_mb\n>           assert (\n                memory_diff < memory_overhead_threshold_mb\n            ), f\"Memory usage exceeded limit after execution (increased by {memory_diff}MB)\"\nE           AssertionError: Memory usage exceeded limit after execution (increased by 2004.46875MB)\nE           assert 2004.46875 < 100\n\ntests/integration/dbapi/sync/V2/test_streaming.py:92: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"engine_name","time":{"start":1744722727316,"stop":1744722727316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"database_name","time":{"start":1744722727317,"stop":1744722727317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth","time":{"start":1744722727317,"stop":1744722727577,"duration":260},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_id","time":{"start":1744722727317,"stop":1744722727317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"service_secret","time":{"start":1744722727317,"stop":1744722727317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"account_name","time":{"start":1744722727577,"stop":1744722727577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_endpoint","time":{"start":1744722727577,"stop":1744722727577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connection","time":{"start":1744722757186,"stop":1744722757443,"duration":257},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"connection::0","time":{"start":1744722764716,"stop":1744722764716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.integration.dbapi.sync.V2"},{"name":"suite","value":"test_streaming"},{"name":"host","value":"fv-az2221-344"},{"name":"thread","value":"2485-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.dbapi.sync.V2.test_streaming"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":2},"items":[{"uid":"348d87dbad9d4182","reportUrl":"https://firebolt-db.github.io/firebolt-python-sdk/python-sdk_acdbf76175f07c3a8a4b4c070a7b2d99180d4526_integration/462//#testresult/348d87dbad9d4182","status":"failed","statusDetails":"AssertionError: Memory usage exceeded limit after execution (increased by 2018.3125MB)\nassert 2018.3125 < 100","time":{"start":1744720323091,"stop":1744720327337,"duration":4246}}]},"tags":[]},"source":"365fb702b0cd0781.json","parameterValues":[]}